name: Build and Test

on:
  push:
    branches:
      - master

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Setup Node.js
        uses: actions/setup-node@v1
        with:
          node-version: 12

      - name: Install dependencies
        run: npm install

      - name: Build application
        run: npm run build

      - name: Run tests
        run: npm test

      - name: Static analysis tests
        run: npm run static-analysis

      - name: Deploy to Azure Web App
        uses: azure/webapps-deploy@v1
        with:
          app-name: my-express-app
          publish-profile: ${{ secrets.AZURE_WEBAPP_PUBLISH_PROFILE }}
          package: .
          enable-static-analysis: true

      - name: Cleanup
        run: npm run cleanup

This workflow will run on every push to the master branch. It checks out the repository, sets up Node.js, installs dependencies, builds the application, runs tests, performs static analysis tests, deploys the application to an Azure Web App, and cleans up afterwards. The workflow assumes that you have set up a secret called AZURE_WEBAPP_PUBLISH_PROFILE containing the Azure Web App publish profile.